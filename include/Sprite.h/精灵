#pragma once
#include "Component.h"
#include "Object.h"       // owner->GetComponent
#include "Transform.h"    
#include <graphics.h>     


class Sprite : public Component {   // 继承Component
private:
    IMAGE* m_image = nullptr; // 存储贴图资源
public:
    // 构造函数：传入要绘制的贴图
    Sprite(IMAGE* img) : m_image(img) {}

    // 重写Component的Draw方法，实现贴图绘制
    void Draw() override {
        if (m_image == nullptr || owner == nullptr) {
            return; // 贴图或所属对象为空时不绘制
        }
        // 获取所属对象的Transform组件
        auto transform = owner->GetComponent<Transform>();
        if (transform == nullptr) {
            return;
        }
        Vector2D pos = transform->GetPosition();
        // 绘制贴图到对应位置
        putimage(static_cast<int>(pos.x), static_cast<int>(pos.y), m_image);
    }
};
